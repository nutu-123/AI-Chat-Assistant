{"ast":null,"code":"import _objectSpread from\"D:/full stack project/SmartTalkAI/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from'react';import{Send,Plus,Menu,Settings,Download,Trash2,User,Lock,Mail,Sparkles,MessageSquare,Edit2,Check,X,Sun,Moon,LogOut,Phone,Globe,CheckCircle,Brain,Cpu,ChevronRight,Square}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_URL='http://localhost:5000/api';export default function NexaFlowAI(){var _user$name;const[isAuthenticated,setIsAuthenticated]=useState(false);const[authMode,setAuthMode]=useState('signin');const[user,setUser]=useState(null);const[messages,setMessages]=useState([]);const[input,setInput]=useState('');const[isLoading,setIsLoading]=useState(false);const[currentSessionId,setCurrentSessionId]=useState(null);const[chatSessions,setChatSessions]=useState([]);const[sidebarOpen,setSidebarOpen]=useState(true);const[showSettings,setShowSettings]=useState(false);const[darkMode,setDarkMode]=useState(false);const[editingSessionId,setEditingSessionId]=useState(null);const[editTitle,setEditTitle]=useState('');const messagesEndRef=useRef(null);const[streamingMessage,setStreamingMessage]=useState('');const[authData,setAuthData]=useState({email:'',password:'',name:'',phone:'',country:''});const[suggestedPrompts,setSuggestedPrompts]=useState([]);const abortControllerRef=useRef(null);useEffect(()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:'smooth'});},[messages,streamingMessage]);useEffect(()=>{const token=localStorage.getItem('token');const userData=localStorage.getItem('user');if(token&&userData){setUser(JSON.parse(userData));setIsAuthenticated(true);loadChatSessions();loadSuggestedPrompts();}else{loadSuggestedPrompts();}},[]);const loadSuggestedPrompts=async()=>{try{const response=await fetch(\"\".concat(API_URL,\"/prompts/suggested\"));const data=await response.json();setSuggestedPrompts(data.prompts||[]);}catch(error){console.error('Failed to load prompts:',error);setSuggestedPrompts([{icon:\"ðŸ’¡\",text:\"Explain quantum computing\",category:\"Learn\"},{icon:\"âœï¸\",text:\"Write a creative story\",category:\"Create\"},{icon:\"ðŸ”\",text:\"Help debug code\",category:\"Code\"},{icon:\"ðŸŒ\",text:\"Latest AI trends\",category:\"Explore\"}]);}};const loadChatSessions=async()=>{try{const response=await fetch(\"\".concat(API_URL,\"/chat/sessions\"),{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))}});const data=await response.json();setChatSessions(data.sessions||[]);}catch(error){console.error('Failed to load sessions:',error);}};const loadSessionMessages=async sessionId=>{try{const response=await fetch(\"\".concat(API_URL,\"/chat/messages/\").concat(sessionId),{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))}});const data=await response.json();setMessages(data.messages||[]);setCurrentSessionId(sessionId);loadSuggestedPrompts();}catch(error){console.error('Failed to load messages:',error);}};const createNewChat=async()=>{try{const response=await fetch(\"\".concat(API_URL,\"/chat/session\"),{method:'POST',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token')),'Content-Type':'application/json'}});const data=await response.json();setCurrentSessionId(data.sessionId);setMessages([]);loadChatSessions();loadSuggestedPrompts();return data.sessionId;}catch(error){console.error('Failed to create session:',error);return null;}};const deleteSession=async(sessionId,e)=>{e.stopPropagation();if(!window.confirm('Delete this chat?'))return;try{await fetch(\"\".concat(API_URL,\"/chat/session/\").concat(sessionId),{method:'DELETE',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))}});if(sessionId===currentSessionId){await createNewChat();}loadChatSessions();}catch(error){console.error('Failed to delete session:',error);}};const updateSessionTitle=async(sessionId,newTitle)=>{try{await fetch(\"\".concat(API_URL,\"/chat/session/\").concat(sessionId,\"/title\"),{method:'PATCH',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token')),'Content-Type':'application/json'},body:JSON.stringify({title:newTitle})});loadChatSessions();setEditingSessionId(null);}catch(error){console.error('Failed to update title:',error);}};const handleAuth=async()=>{if(!authData.email||!authData.password){alert('Please fill in all required fields');return;}if(authMode==='signup'&&!authData.name){alert('Please enter your name');return;}const endpoint=authMode==='signin'?'/auth/signin':'/auth/signup';try{const response=await fetch(\"\".concat(API_URL).concat(endpoint),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(authData)});const data=await response.json();if(response.ok){localStorage.setItem('token',data.token);localStorage.setItem('user',JSON.stringify(data.user));setUser(data.user);setIsAuthenticated(true);if(authMode==='signup'&&data.message){alert(data.message);}const sessionId=await createNewChat();if(sessionId){setCurrentSessionId(sessionId);}loadChatSessions();}else{alert(data.message||'Authentication failed');}}catch(error){alert('Cannot connect to backend. Please ensure the server is running.');}};const stopGeneration=()=>{if(abortControllerRef.current){abortControllerRef.current.abort();abortControllerRef.current=null;}if(streamingMessage){setMessages(prev=>[...prev,{role:'assistant',content:streamingMessage+' [Stopped by user]',timestamp:new Date()}]);}setStreamingMessage('');setIsLoading(false);};const handleSendMessage=async()=>{if(!input.trim()||isLoading)return;// CRITICAL FIX: Ensure session exists BEFORE sending\nlet sessionId=currentSessionId;if(!sessionId){console.log('No session ID, creating new session...');sessionId=await createNewChat();if(!sessionId){alert('Failed to create chat session. Please try again.');return;}setCurrentSessionId(sessionId);// IMPORTANT: Wait for session to be fully created\nawait new Promise(resolve=>setTimeout(resolve,500));}console.log('Sending message with session ID:',sessionId);const userMessage={role:'user',content:input,timestamp:new Date()};setMessages(prev=>[...prev,userMessage]);const currentInput=input;setInput('');setIsLoading(true);setStreamingMessage('');// Create abort controller for stop functionality\nabortControllerRef.current=new AbortController();try{const token=localStorage.getItem('token');const response=await fetch(\"\".concat(API_URL,\"/chat/stream\"),{method:'POST',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'},body:JSON.stringify({message:currentInput,sessionId:sessionId// Using the confirmed session ID\n}),signal:abortControllerRef.current.signal});if(!response.ok){throw new Error(\"HTTP \".concat(response.status));}const reader=response.body.getReader();const decoder=new TextDecoder();let fullMessage='';while(true){const{done,value}=await reader.read();if(done)break;const chunk=decoder.decode(value);const lines=chunk.split('\\n');for(const line of lines){if(line.startsWith('data: ')){const data=line.slice(6);if(data==='[DONE]')continue;try{const parsed=JSON.parse(data);if(parsed.content){fullMessage+=parsed.content;setStreamingMessage(fullMessage);}}catch(e){}}}}if(fullMessage.trim()){setMessages(prev=>[...prev,{role:'assistant',content:fullMessage,timestamp:new Date()}]);}setStreamingMessage('');loadChatSessions();}catch(error){if(error.name==='AbortError'){console.log('Generation stopped by user');}else{console.error('Chat error:',error);setMessages(prev=>[...prev,{role:'assistant',content:'âš ï¸ Error connecting to AI. Please try again.',timestamp:new Date(),isError:true}]);}}finally{setIsLoading(false);abortControllerRef.current=null;}};const handleKeyPress=e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();if(isAuthenticated){handleSendMessage();}else{handleAuth();}}};const exportChat=()=>{const content=messages.map(m=>\"[\".concat(new Date(m.timestamp).toLocaleString(),\"] \").concat(m.role,\": \").concat(m.content)).join('\\n\\n');const blob=new Blob([content],{type:'text/plain'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=\"nexaflow-ai-\".concat(new Date().toISOString(),\".txt\");a.click();};const clearCurrentChat=async()=>{if(!currentSessionId)return;if(!window.confirm('Clear all messages?'))return;try{await fetch(\"\".concat(API_URL,\"/chat/clear\"),{method:'POST',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token')),'Content-Type':'application/json'},body:JSON.stringify({sessionId:currentSessionId})});setMessages([]);loadChatSessions();}catch(error){console.error('Clear error:',error);}};// FIXED: Accurate date calculation\nconst formatDate=dateString=>{const chatDate=new Date(dateString);const today=new Date();// Normalize to midnight for accurate comparison\nconst chatDay=new Date(chatDate.getFullYear(),chatDate.getMonth(),chatDate.getDate());const todayDay=new Date(today.getFullYear(),today.getMonth(),today.getDate());// Calculate difference in milliseconds\nconst diffMs=todayDay-chatDay;const diffDays=Math.floor(diffMs/(1000*60*60*24));if(diffDays===0)return'Today';if(diffDays===1)return'Yesterday';if(diffDays<=7)return\"\".concat(diffDays,\" days ago\");if(diffDays<=30)return\"\".concat(Math.floor(diffDays/7),\" weeks ago\");// For older dates, show formatted date\nconst options={month:'short',day:'numeric'};if(chatDate.getFullYear()!==today.getFullYear()){options.year='numeric';}return chatDate.toLocaleDateString('en-US',options);};if(!isAuthenticated){return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen \".concat(darkMode?'bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900':'bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50',\" flex items-center justify-center p-4 relative overflow-hidden transition-colors duration-500\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"absolute inset-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-20 left-20 w-72 h-72 \".concat(darkMode?'bg-purple-500':'bg-purple-300',\" rounded-full mix-blend-multiply filter blur-xl \").concat(darkMode?'opacity-20':'opacity-30',\" animate-blob\")}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-40 right-20 w-72 h-72 \".concat(darkMode?'bg-blue-500':'bg-blue-300',\" rounded-full mix-blend-multiply filter blur-xl \").concat(darkMode?'opacity-20':'opacity-30',\" animate-blob animation-delay-2000\")}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-20 left-1/2 w-72 h-72 \".concat(darkMode?'bg-pink-500':'bg-pink-300',\" rounded-full mix-blend-multiply filter blur-xl \").concat(darkMode?'opacity-20':'opacity-30',\" animate-blob animation-delay-4000\")})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setDarkMode(!darkMode),className:\"absolute top-6 right-6 p-3 rounded-full \".concat(darkMode?'bg-white/10 hover:bg-white/20':'bg-purple-100 hover:bg-purple-200',\" backdrop-blur-sm transition-all duration-300 shadow-lg z-50\"),children:darkMode?/*#__PURE__*/_jsx(Sun,{className:\"w-6 h-6 text-yellow-300\"}):/*#__PURE__*/_jsx(Moon,{className:\"w-6 h-6 text-purple-700\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"relative w-full max-w-6xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-12 items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(darkMode?'text-white':'text-gray-900',\" space-y-6\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsxs(\"svg\",{viewBox:\"0 0 400 400\",className:\"w-64 h-64 mx-auto\",children:[/*#__PURE__*/_jsx(\"defs\",{children:/*#__PURE__*/_jsxs(\"linearGradient\",{id:\"grad1\",x1:\"0%\",y1:\"0%\",x2:\"100%\",y2:\"100%\",children:[/*#__PURE__*/_jsx(\"stop\",{offset:\"0%\",style:{stopColor:'#8b5cf6',stopOpacity:1}}),/*#__PURE__*/_jsx(\"stop\",{offset:\"100%\",style:{stopColor:'#3b82f6',stopOpacity:1}})]})}),/*#__PURE__*/_jsx(\"circle\",{cx:\"200\",cy:\"200\",r:\"180\",fill:\"url(#grad1)\",opacity:\"0.2\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"200\",cy:\"200\",r:\"140\",fill:\"url(#grad1)\",opacity:\"0.3\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"200\",cy:\"200\",r:\"100\",fill:\"url(#grad1)\",opacity:\"0.4\"}),/*#__PURE__*/_jsxs(\"g\",{className:\"animate-pulse\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M200 120 L240 160 L200 200 L160 160 Z\",fill:\"#8b5cf6\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M200 200 L240 240 L200 280 L160 240 Z\",fill:\"#3b82f6\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"200\",cy:\"160\",r:\"8\",fill:\"white\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"240\",cy:\"200\",r:\"8\",fill:\"white\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"200\",cy:\"240\",r:\"8\",fill:\"white\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"160\",cy:\"200\",r:\"8\",fill:\"white\"})]}),/*#__PURE__*/_jsx(\"text\",{x:\"200\",y:\"340\",textAnchor:\"middle\",fill:darkMode?'white':'#1f2937',fontSize:\"32\",fontWeight:\"bold\",children:\"Smart Talk\"}),/*#__PURE__*/_jsx(\"text\",{x:\"200\",y:\"365\",textAnchor:\"middle\",fill:darkMode?'#a78bfa':'#8b5cf6',fontSize:\"14\",children:\"AI Intelligence Platform\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center md:text-left space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-5xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent\",children:\"Smart Talk AI\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl \".concat(darkMode?'text-purple-300':'text-purple-600',\" font-semibold\"),children:\"Next-Generation Intelligence\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 \".concat(darkMode?'text-gray-300':'text-gray-700',\" text-lg leading-relaxed\"),children:[/*#__PURE__*/_jsxs(\"p\",{className:\"flex items-start gap-3\",children:[/*#__PURE__*/_jsx(Brain,{className:\"w-6 h-6 text-purple-500 flex-shrink-0 mt-1\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Experience cutting-edge AI with multi-provider fallback system ensuring 99.9% uptime and intelligent responses.\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"flex items-start gap-3\",children:[/*#__PURE__*/_jsx(Cpu,{className:\"w-6 h-6 text-blue-500 flex-shrink-0 mt-1\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Powered by Gemini, OpenAI, and Cohere - seamlessly switching to ensure you always get the best response.\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"flex items-start gap-3\",children:[/*#__PURE__*/_jsx(ChevronRight,{className:\"w-6 h-6 text-yellow-500 flex-shrink-0 mt-1\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Lightning-fast streaming responses, smart context retention, and unlimited conversations - completely free.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pt-6 flex flex-wrap gap-3 justify-center md:justify-start\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"px-4 py-2 rounded-full text-sm font-semibold \".concat(darkMode?'bg-green-500/20 text-green-300 border border-green-500/30':'bg-green-100 text-green-700 border border-green-300'),children:\"\\u2713 Multi-AI Powered\"}),/*#__PURE__*/_jsx(\"span\",{className:\"px-4 py-2 rounded-full text-sm font-semibold \".concat(darkMode?'bg-blue-500/20 text-blue-300 border border-blue-500/30':'bg-blue-100 text-blue-700 border border-blue-300'),children:\"\\u2713 99.9% Uptime\"}),/*#__PURE__*/_jsx(\"span\",{className:\"px-4 py-2 rounded-full text-sm font-semibold \".concat(darkMode?'bg-purple-500/20 text-purple-300 border border-purple-500/30':'bg-purple-100 text-purple-700 border border-purple-300'),children:\"\\u2713 Enterprise Grade\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(darkMode?'bg-white/10 border-white/20':'bg-white border-gray-200',\" backdrop-blur-xl rounded-2xl p-8 shadow-2xl border\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mb-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setAuthMode('signin'),className:\"flex-1 py-3 rounded-xl font-medium transition-all \".concat(authMode==='signin'?darkMode?'bg-white text-purple-600 shadow-lg':'bg-purple-600 text-white shadow-lg':darkMode?'text-white hover:bg-white/10':'text-gray-700 hover:bg-gray-100'),children:\"Sign In\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setAuthMode('signup'),className:\"flex-1 py-3 rounded-xl font-medium transition-all \".concat(authMode==='signup'?darkMode?'bg-white text-purple-600 shadow-lg':'bg-purple-600 text-white shadow-lg':darkMode?'text-white hover:bg-white/10':'text-gray-700 hover:bg-gray-100'),children:\"Sign Up for Free\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[authMode==='signup'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(User,{className:\"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 \".concat(darkMode?'text-gray-400':'text-gray-500')}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Full Name *\",value:authData.name,onChange:e=>setAuthData(_objectSpread(_objectSpread({},authData),{},{name:e.target.value})),onKeyPress:handleKeyPress,className:\"w-full pl-12 pr-4 py-3 rounded-xl \".concat(darkMode?'bg-white/10 border-white/20 text-white placeholder-gray-400':'bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-500',\" border focus:outline-none focus:border-purple-400 transition-all\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Phone,{className:\"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 \".concat(darkMode?'text-gray-400':'text-gray-500')}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",placeholder:\"Phone Number *\",value:authData.phone,onChange:e=>setAuthData(_objectSpread(_objectSpread({},authData),{},{phone:e.target.value})),onKeyPress:handleKeyPress,className:\"w-full pl-12 pr-4 py-3 rounded-xl \".concat(darkMode?'bg-white/10 border-white/20 text-white placeholder-gray-400':'bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-500',\" border focus:outline-none focus:border-purple-400 transition-all\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Globe,{className:\"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 \".concat(darkMode?'text-gray-400':'text-gray-500')}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Country *\",value:authData.country,onChange:e=>setAuthData(_objectSpread(_objectSpread({},authData),{},{country:e.target.value})),onKeyPress:handleKeyPress,className:\"w-full pl-12 pr-4 py-3 rounded-xl \".concat(darkMode?'bg-white/10 border-white/20 text-white placeholder-gray-400':'bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-500',\" border focus:outline-none focus:border-purple-400 transition-all\")})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Mail,{className:\"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 \".concat(darkMode?'text-gray-400':'text-gray-500')}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email *\",value:authData.email,onChange:e=>setAuthData(_objectSpread(_objectSpread({},authData),{},{email:e.target.value})),onKeyPress:handleKeyPress,className:\"w-full pl-12 pr-4 py-3 rounded-xl \".concat(darkMode?'bg-white/10 border-white/20 text-white placeholder-gray-400':'bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-500',\" border focus:outline-none focus:border-purple-400 transition-all\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Lock,{className:\"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 \".concat(darkMode?'text-gray-400':'text-gray-500')}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password *\",value:authData.password,onChange:e=>setAuthData(_objectSpread(_objectSpread({},authData),{},{password:e.target.value})),onKeyPress:handleKeyPress,className:\"w-full pl-12 pr-4 py-3 rounded-xl \".concat(darkMode?'bg-white/10 border-white/20 text-white placeholder-gray-400':'bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-500',\" border focus:outline-none focus:border-purple-400 transition-all\")})]}),authMode==='signup'&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-2 p-3 rounded-lg \".concat(darkMode?'bg-blue-500/10 border-blue-500/30':'bg-blue-50 border-blue-200',\" border text-sm\"),children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5\"}),/*#__PURE__*/_jsx(\"p\",{className:darkMode?'text-blue-200':'text-blue-800',children:\"We'll send a verification email to confirm your account.\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAuth,className:\"w-full py-3 rounded-xl bg-gradient-to-r from-purple-500 to-blue-500 text-white font-semibold hover:shadow-xl transition-all hover:scale-[1.02]\",children:authMode==='signin'?'Sign In':'Create Account'})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center text-sm \".concat(darkMode?'text-gray-400':'text-gray-600',\" mt-6\"),children:[authMode==='signin'?\"New here? \":\"Already have an account? \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>setAuthMode(authMode==='signin'?'signup':'signin'),className:\"\".concat(darkMode?'text-purple-300 hover:text-white':'text-purple-600 hover:text-purple-700',\" font-semibold\"),children:authMode==='signin'?'Sign Up':'Sign In'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8 pt-6 border-t \".concat(darkMode?'border-white/10':'border-gray-200'),children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-xs \".concat(darkMode?'text-gray-400':'text-gray-600'),children:\"\\xA9 2025 Smart Talk AI. All rights reserved.\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center text-xs \".concat(darkMode?'text-gray-500':'text-gray-500',\" mt-1\"),children:[\"Developed with \\u2764\\uFE0F by \",/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-purple-400\",children:\"Nutan Phadtare\"})]})]})]})]})}),/*#__PURE__*/_jsx(\"style\",{children:\"\\n          @keyframes blob {\\n            0%, 100% { transform: translate(0, 0) scale(1); }\\n            25% { transform: translate(20px, -50px) scale(1.1); }\\n            50% { transform: translate(-20px, 20px) scale(0.9); }\\n            75% { transform: translate(50px, 50px) scale(1.05); }\\n          }\\n          .animate-blob { animation: blob 7s infinite; }\\n          .animation-delay-2000 { animation-delay: 2s; }\\n          .animation-delay-4000 { animation-delay: 4s; }\\n        \"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-screen \".concat(darkMode?'bg-gray-900':'bg-gray-50'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(sidebarOpen?'w-72':'w-0',\" transition-all duration-300 \").concat(darkMode?'bg-gray-950 border-gray-800':'bg-white border-gray-200',\" border-r flex flex-col overflow-hidden\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-b \".concat(darkMode?'border-gray-800':'border-gray-200'),children:/*#__PURE__*/_jsxs(\"button\",{onClick:createNewChat,className:\"w-full flex items-center gap-3 px-4 py-3 rounded-lg \".concat(darkMode?'bg-gray-800 hover:bg-gray-700 text-white':'bg-purple-100 hover:bg-purple-200 text-purple-900',\" font-medium transition-colors\"),children:[/*#__PURE__*/_jsx(Plus,{className:\"w-5 h-5\"}),\"New Chat\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 overflow-y-auto p-3 space-y-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-3 py-2 text-xs font-semibold \".concat(darkMode?'text-gray-400':'text-gray-600',\" uppercase tracking-wide\"),children:\"Chat History\"}),chatSessions.map(session=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>loadSessionMessages(session.sessionId),className:\"group flex items-start gap-3 px-3 py-2 rounded-lg cursor-pointer transition-colors \".concat(session.sessionId===currentSessionId?darkMode?'bg-gray-800 text-white':'bg-purple-50 text-purple-900':darkMode?'hover:bg-gray-800/50 text-gray-300':'hover:bg-gray-50 text-gray-700'),children:[/*#__PURE__*/_jsx(MessageSquare,{className:\"w-4 h-4 mt-1 flex-shrink-0 text-purple-500\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 min-w-0\",children:editingSessionId===session.sessionId?/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-1\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editTitle,onChange:e=>setEditTitle(e.target.value),className:\"flex-1 px-2 py-1 text-xs rounded \".concat(darkMode?'bg-gray-900 text-white border-gray-700':'bg-white text-gray-900 border-gray-300',\" border\"),autoFocus:true}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateSessionTitle(session.sessionId,editTitle),children:/*#__PURE__*/_jsx(Check,{className:\"w-4 h-4 text-green-500\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingSessionId(null),children:/*#__PURE__*/_jsx(X,{className:\"w-4 h-4 text-red-500\"})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm truncate \".concat(darkMode?'text-white':'text-gray-900'),children:session.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs \".concat(darkMode?'text-gray-500':'text-gray-600'),children:formatDate(session.updatedAt)})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"hidden group-hover:flex gap-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();setEditingSessionId(session.sessionId);setEditTitle(session.title);},className:\"p-1 rounded \".concat(darkMode?'hover:bg-gray-700':'hover:bg-gray-200'),children:/*#__PURE__*/_jsx(Edit2,{className:\"w-3 h-3\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>deleteSession(session.sessionId,e),className:\"p-1 rounded \".concat(darkMode?'hover:bg-gray-700':'hover:bg-gray-200'),children:/*#__PURE__*/_jsx(Trash2,{className:\"w-3 h-3 text-red-400\"})})]})]},session.sessionId))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border-t \".concat(darkMode?'border-gray-800':'border-gray-200',\" space-y-2\"),children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowSettings(!showSettings),className:\"w-full flex items-center gap-3 px-4 py-2 rounded-lg \".concat(darkMode?'hover:bg-gray-800 text-gray-300':'hover:bg-gray-100 text-gray-700',\" transition-colors\"),children:[/*#__PURE__*/_jsx(Settings,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Settings\"})]}),showSettings&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 rounded-lg \".concat(darkMode?'bg-gray-800':'bg-gray-100',\" space-y-3\"),children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setDarkMode(!darkMode),className:\"w-full flex items-center justify-center gap-3 px-3 py-2 rounded-lg \".concat(darkMode?'bg-gray-900 text-white':'bg-white text-gray-900',\" border \").concat(darkMode?'border-gray-700':'border-gray-300',\" hover:scale-105 transition-transform\"),children:darkMode?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Sun,{className:\"w-4 h-4 text-yellow-400\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:\"Light Mode\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Moon,{className:\"w-4 h-4 text-purple-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:\"Dark Mode\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 rounded-lg \".concat(darkMode?'bg-gray-900/50 border-gray-700':'bg-white border-gray-300',\" border\"),children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-semibold mb-2 \".concat(darkMode?'text-gray-400':'text-gray-600'),children:\"AI Providers\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-xs\",children:[/*#__PURE__*/_jsx(\"span\",{className:darkMode?'text-gray-300':'text-gray-700',children:\"Gemini\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-green-500\",children:\"\\u25CF\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-xs\",children:[/*#__PURE__*/_jsx(\"span\",{className:darkMode?'text-gray-300':'text-gray-700',children:\"OpenAI\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-green-500\",children:\"\\u25CF\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-xs\",children:[/*#__PURE__*/_jsx(\"span\",{className:darkMode?'text-gray-300':'text-gray-700',children:\"Cohere\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-green-500\",children:\"\\u25CF\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:clearCurrentChat,className:\"w-full flex items-center gap-3 px-4 py-2 rounded-lg \".concat(darkMode?'hover:bg-gray-800 text-gray-300':'hover:bg-gray-100 text-gray-700',\" transition-colors\"),children:[/*#__PURE__*/_jsx(Trash2,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Clear Chat\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:exportChat,className:\"w-full flex items-center gap-3 px-4 py-2 rounded-lg \".concat(darkMode?'hover:bg-gray-800 text-gray-300':'hover:bg-gray-100 text-gray-700',\" transition-colors\"),children:[/*#__PURE__*/_jsx(Download,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Export Chat\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 px-4 py-3 rounded-lg \".concat(darkMode?'bg-gray-800':'bg-gray-100'),children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center font-bold text-white\",children:user===null||user===void 0?void 0:(_user$name=user.name)===null||_user$name===void 0?void 0:_user$name.charAt(0).toUpperCase()}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium truncate \".concat(darkMode?'text-white':'text-gray-900'),children:user===null||user===void 0?void 0:user.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs truncate \".concat(darkMode?'text-gray-400':'text-gray-600'),children:user===null||user===void 0?void 0:user.email})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{localStorage.clear();window.location.reload();},className:\"p-2 rounded-lg \".concat(darkMode?'hover:bg-gray-700':'hover:bg-gray-200',\" transition-colors\"),title:\"Logout\",children:/*#__PURE__*/_jsx(LogOut,{className:\"w-4 h-4\"})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(darkMode?'bg-gray-900 border-gray-800':'bg-white border-gray-200',\" border-b px-6 py-4 flex items-center justify-between\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSidebarOpen(!sidebarOpen),className:\"p-2 rounded-lg \".concat(darkMode?'hover:bg-gray-800 text-gray-300':'hover:bg-gray-100 text-gray-700',\" transition-colors\"),children:/*#__PURE__*/_jsx(Menu,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center shadow-lg\",children:/*#__PURE__*/_jsx(Sparkles,{className:\"w-5 h-5 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-lg font-bold \".concat(darkMode?'text-white':'text-gray-900'),children:\"Smart Talk AI\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs \".concat(darkMode?'text-gray-400':'text-gray-600'),children:\"Multi-Provider Intelligence\"})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto\",children:messages.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"h-full flex flex-col items-center justify-center p-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-3xl w-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-purple-500 to-blue-500 rounded-2xl mb-6 shadow-2xl\",children:/*#__PURE__*/_jsx(Sparkles,{className:\"w-10 h-10 text-white\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-4xl font-bold mb-3 \".concat(darkMode?'text-white':'text-gray-900'),children:\"How can I help you today?\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg \".concat(darkMode?'text-gray-400':'text-gray-600'),children:\"Powered by multiple AI providers for maximum reliability\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid md:grid-cols-2 gap-4\",children:suggestedPrompts.map((prompt,i)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setInput(prompt.text),className:\"group p-5 rounded-xl text-left transition-all hover:scale-105 \".concat(darkMode?'bg-gray-800 hover:bg-gray-750 border-gray-700':'bg-white hover:bg-gray-50 border-gray-200',\" border shadow-lg hover:shadow-xl\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-3xl\",children:prompt.icon}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-bold mb-1 uppercase tracking-wide \".concat(darkMode?'text-purple-400':'text-purple-600'),children:prompt.category}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium \".concat(darkMode?'text-gray-200':'text-gray-800'),children:prompt.text})]}),/*#__PURE__*/_jsx(ChevronRight,{className:\"w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity \".concat(darkMode?'text-gray-400':'text-gray-500')})]})},i))})]})}):/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-3xl mx-auto w-full p-6 space-y-6\",children:[messages.map((msg,i)=>{var _user$name2;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4 animate-fadeIn\",children:[msg.role==='assistant'?/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center flex-shrink-0 shadow-lg\",children:/*#__PURE__*/_jsx(Sparkles,{className:\"w-5 h-5 text-white\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-500 flex items-center justify-center flex-shrink-0 font-bold text-white shadow-lg\",children:user===null||user===void 0?void 0:(_user$name2=user.name)===null||_user$name2===void 0?void 0:_user$name2.charAt(0).toUpperCase()}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-bold \".concat(darkMode?'text-white':'text-gray-900'),children:msg.role==='user'?user===null||user===void 0?void 0:user.name:'NexaFlow AI'}),msg.provider&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs px-2 py-0.5 rounded-full \".concat(darkMode?'bg-purple-900/50 text-purple-300':'bg-purple-100 text-purple-700'),children:msg.provider})]}),/*#__PURE__*/_jsx(\"p\",{className:\"whitespace-pre-wrap leading-relaxed \".concat(msg.isError?'text-red-500':darkMode?'text-gray-300':'text-gray-700'),children:msg.content})]})]},i);}),streamingMessage&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4 animate-fadeIn\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center flex-shrink-0 shadow-lg\",children:/*#__PURE__*/_jsx(Sparkles,{className:\"w-5 h-5 text-white animate-pulse\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-bold block mb-2 \".concat(darkMode?'text-white':'text-gray-900'),children:\"Smart Talk AI\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"whitespace-pre-wrap leading-relaxed \".concat(darkMode?'text-gray-300':'text-gray-700'),children:[streamingMessage,/*#__PURE__*/_jsx(\"span\",{className:\"inline-block w-2 h-4 bg-purple-500 ml-1 animate-pulse\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(darkMode?'bg-gray-900 border-gray-800':'bg-white border-gray-200',\" border-t p-4\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-3xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4 p-4 rounded-2xl \".concat(darkMode?'bg-gray-800 border-gray-700':'bg-gray-50 border-gray-200',\" border shadow-lg\"),children:[/*#__PURE__*/_jsx(\"textarea\",{value:input,onChange:e=>setInput(e.target.value),onKeyPress:handleKeyPress,placeholder:\"Ask Smart Talk AI anything...\",disabled:isLoading,rows:1,className:\"flex-1 bg-transparent border-none focus:outline-none resize-none \".concat(darkMode?'text-white placeholder-gray-500':'text-gray-900 placeholder-gray-400',\" disabled:opacity-50\"),style:{minHeight:'24px',maxHeight:'200px'}}),isLoading?/*#__PURE__*/_jsx(\"button\",{onClick:stopGeneration,className:\"w-12 h-12 rounded-xl bg-red-500 hover:bg-red-600 flex items-center justify-center transition-all hover:scale-105 flex-shrink-0\",title:\"Stop generation\",children:/*#__PURE__*/_jsx(Square,{className:\"w-5 h-5 text-white fill-white\"})}):/*#__PURE__*/_jsx(\"button\",{onClick:handleSendMessage,disabled:!input.trim(),className:\"w-12 h-12 rounded-xl bg-gradient-to-r from-purple-500 to-blue-500 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-xl transition-all hover:scale-105 flex-shrink-0\",children:/*#__PURE__*/_jsx(Send,{className:\"w-5 h-5 text-white\"})})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-center mt-3 \".concat(darkMode?'text-gray-500':'text-gray-600'),children:\"Smart Talk AI uses multiple providers for best results. Always verify important information.\"})]})})]}),/*#__PURE__*/_jsx(\"style\",{children:\"\\n        @keyframes fadeIn {\\n          from { opacity: 0; transform: translateY(10px); }\\n          to { opacity: 1; transform: translateY(0); }\\n        }\\n        .animate-fadeIn {\\n          animation: fadeIn 0.3s ease-out;\\n        }\\n      \"})]});}","map":{"version":3,"names":["React","useState","useEffect","useRef","Send","Plus","Menu","Settings","Download","Trash2","User","Lock","Mail","Sparkles","MessageSquare","Edit2","Check","X","Sun","Moon","LogOut","Phone","Globe","CheckCircle","Brain","Cpu","ChevronRight","Square","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API_URL","NexaFlowAI","_user$name","isAuthenticated","setIsAuthenticated","authMode","setAuthMode","user","setUser","messages","setMessages","input","setInput","isLoading","setIsLoading","currentSessionId","setCurrentSessionId","chatSessions","setChatSessions","sidebarOpen","setSidebarOpen","showSettings","setShowSettings","darkMode","setDarkMode","editingSessionId","setEditingSessionId","editTitle","setEditTitle","messagesEndRef","streamingMessage","setStreamingMessage","authData","setAuthData","email","password","name","phone","country","suggestedPrompts","setSuggestedPrompts","abortControllerRef","_messagesEndRef$curre","current","scrollIntoView","behavior","token","localStorage","getItem","userData","JSON","parse","loadChatSessions","loadSuggestedPrompts","response","fetch","concat","data","json","prompts","error","console","icon","text","category","headers","sessions","loadSessionMessages","sessionId","createNewChat","method","deleteSession","e","stopPropagation","window","confirm","updateSessionTitle","newTitle","body","stringify","title","handleAuth","alert","endpoint","ok","setItem","message","stopGeneration","abort","prev","role","content","timestamp","Date","handleSendMessage","trim","log","Promise","resolve","setTimeout","userMessage","currentInput","AbortController","signal","Error","status","reader","getReader","decoder","TextDecoder","fullMessage","done","value","read","chunk","decode","lines","split","line","startsWith","slice","parsed","isError","handleKeyPress","key","shiftKey","preventDefault","exportChat","map","m","toLocaleString","join","blob","Blob","type","url","URL","createObjectURL","a","document","createElement","href","download","toISOString","click","clearCurrentChat","formatDate","dateString","chatDate","today","chatDay","getFullYear","getMonth","getDate","todayDay","diffMs","diffDays","Math","floor","options","month","day","year","toLocaleDateString","className","children","onClick","viewBox","id","x1","y1","x2","y2","offset","style","stopColor","stopOpacity","cx","cy","r","fill","opacity","d","x","y","textAnchor","fontSize","fontWeight","placeholder","onChange","_objectSpread","target","onKeyPress","session","autoFocus","updatedAt","charAt","toUpperCase","clear","location","reload","length","prompt","i","msg","_user$name2","provider","ref","disabled","rows","minHeight","maxHeight"],"sources":["D:/full stack project/SmartTalkAI/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { Send, Plus, Menu, Settings, Download, Trash2, User, Lock, Mail, Sparkles, MessageSquare, Edit2, Check, X, Sun, Moon, LogOut, Phone, Globe, CheckCircle, Brain, Cpu, ChevronRight, Square } from 'lucide-react';\n\nconst API_URL = 'http://localhost:5000/api';\n\nexport default function NexaFlowAI() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [authMode, setAuthMode] = useState('signin');\n  const [user, setUser] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [currentSessionId, setCurrentSessionId] = useState(null);\n  const [chatSessions, setChatSessions] = useState([]);\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const [showSettings, setShowSettings] = useState(false);\n  const [darkMode, setDarkMode] = useState(false);\n  const [editingSessionId, setEditingSessionId] = useState(null);\n  const [editTitle, setEditTitle] = useState('');\n  const messagesEndRef = useRef(null);\n  const [streamingMessage, setStreamingMessage] = useState('');\n  const [authData, setAuthData] = useState({ \n    email: '', \n    password: '', \n    name: '', \n    phone: '', \n    country: '' \n  });\n  const [suggestedPrompts, setSuggestedPrompts] = useState([]);\n  const abortControllerRef = useRef(null);\n\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages, streamingMessage]);\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    const userData = localStorage.getItem('user');\n    if (token && userData) {\n      setUser(JSON.parse(userData));\n      setIsAuthenticated(true);\n      loadChatSessions();\n      loadSuggestedPrompts();\n    } else {\n      loadSuggestedPrompts();\n    }\n  }, []);\n\n  const loadSuggestedPrompts = async () => {\n    try {\n      const response = await fetch(`${API_URL}/prompts/suggested`);\n      const data = await response.json();\n      setSuggestedPrompts(data.prompts || []);\n    } catch (error) {\n      console.error('Failed to load prompts:', error);\n      setSuggestedPrompts([\n        { icon: \"ðŸ’¡\", text: \"Explain quantum computing\", category: \"Learn\" },\n        { icon: \"âœï¸\", text: \"Write a creative story\", category: \"Create\" },\n        { icon: \"ðŸ”\", text: \"Help debug code\", category: \"Code\" },\n        { icon: \"ðŸŒ\", text: \"Latest AI trends\", category: \"Explore\" }\n      ]);\n    }\n  };\n\n  const loadChatSessions = async () => {\n    try {\n      const response = await fetch(`${API_URL}/chat/sessions`, {\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      const data = await response.json();\n      setChatSessions(data.sessions || []);\n    } catch (error) {\n      console.error('Failed to load sessions:', error);\n    }\n  };\n\n  const loadSessionMessages = async (sessionId) => {\n    try {\n      const response = await fetch(`${API_URL}/chat/messages/${sessionId}`, {\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      const data = await response.json();\n      setMessages(data.messages || []);\n      setCurrentSessionId(sessionId);\n      loadSuggestedPrompts();\n    } catch (error) {\n      console.error('Failed to load messages:', error);\n    }\n  };\n\n  const createNewChat = async () => {\n    try {\n      const response = await fetch(`${API_URL}/chat/session`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('token')}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      const data = await response.json();\n      setCurrentSessionId(data.sessionId);\n      setMessages([]);\n      loadChatSessions();\n      loadSuggestedPrompts();\n      return data.sessionId;\n    } catch (error) {\n      console.error('Failed to create session:', error);\n      return null;\n    }\n  };\n\n  const deleteSession = async (sessionId, e) => {\n    e.stopPropagation();\n    if (!window.confirm('Delete this chat?')) return;\n\n    try {\n      await fetch(`${API_URL}/chat/session/${sessionId}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      \n      if (sessionId === currentSessionId) {\n        await createNewChat();\n      }\n      \n      loadChatSessions();\n    } catch (error) {\n      console.error('Failed to delete session:', error);\n    }\n  };\n\n  const updateSessionTitle = async (sessionId, newTitle) => {\n    try {\n      await fetch(`${API_URL}/chat/session/${sessionId}/title`, {\n        method: 'PATCH',\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('token')}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ title: newTitle })\n      });\n      \n      loadChatSessions();\n      setEditingSessionId(null);\n    } catch (error) {\n      console.error('Failed to update title:', error);\n    }\n  };\n\n  const handleAuth = async () => {\n    if (!authData.email || !authData.password) {\n      alert('Please fill in all required fields');\n      return;\n    }\n    if (authMode === 'signup' && !authData.name) {\n      alert('Please enter your name');\n      return;\n    }\n    \n    const endpoint = authMode === 'signin' ? '/auth/signin' : '/auth/signup';\n    \n    try {\n      const response = await fetch(`${API_URL}${endpoint}`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(authData)\n      });\n\n      const data = await response.json();\n      \n      if (response.ok) {\n        localStorage.setItem('token', data.token);\n        localStorage.setItem('user', JSON.stringify(data.user));\n        setUser(data.user);\n        setIsAuthenticated(true);\n        \n        if (authMode === 'signup' && data.message) {\n          alert(data.message);\n        }\n        \n        const sessionId = await createNewChat();\n        if (sessionId) {\n          setCurrentSessionId(sessionId);\n        }\n        loadChatSessions();\n      } else {\n        alert(data.message || 'Authentication failed');\n      }\n    } catch (error) {\n      alert('Cannot connect to backend. Please ensure the server is running.');\n    }\n  };\n\n  const stopGeneration = () => {\n    if (abortControllerRef.current) {\n      abortControllerRef.current.abort();\n      abortControllerRef.current = null;\n    }\n    \n    if (streamingMessage) {\n      setMessages(prev => [...prev, { \n        role: 'assistant', \n        content: streamingMessage + ' [Stopped by user]', \n        timestamp: new Date()\n      }]);\n    }\n    \n    setStreamingMessage('');\n    setIsLoading(false);\n  };\n\n  const handleSendMessage = async () => {\n    if (!input.trim() || isLoading) return;\n\n    // CRITICAL FIX: Ensure session exists BEFORE sending\n    let sessionId = currentSessionId;\n    if (!sessionId) {\n      console.log('No session ID, creating new session...');\n      sessionId = await createNewChat();\n      if (!sessionId) {\n        alert('Failed to create chat session. Please try again.');\n        return;\n      }\n      setCurrentSessionId(sessionId);\n      // IMPORTANT: Wait for session to be fully created\n      await new Promise(resolve => setTimeout(resolve, 500));\n    }\n\n    console.log('Sending message with session ID:', sessionId);\n\n    const userMessage = { role: 'user', content: input, timestamp: new Date() };\n    setMessages(prev => [...prev, userMessage]);\n    const currentInput = input;\n    setInput('');\n    setIsLoading(true);\n    setStreamingMessage('');\n\n    // Create abort controller for stop functionality\n    abortControllerRef.current = new AbortController();\n\n    try {\n      const token = localStorage.getItem('token');\n      \n      const response = await fetch(`${API_URL}/chat/stream`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          message: currentInput,\n          sessionId: sessionId  // Using the confirmed session ID\n        }),\n        signal: abortControllerRef.current.signal\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}`);\n      }\n\n      const reader = response.body.getReader();\n      const decoder = new TextDecoder();\n      let fullMessage = '';\n\n      while (true) {\n        const { done, value } = await reader.read();\n        if (done) break;\n        \n        const chunk = decoder.decode(value);\n        const lines = chunk.split('\\n');\n        \n        for (const line of lines) {\n          if (line.startsWith('data: ')) {\n            const data = line.slice(6);\n            if (data === '[DONE]') continue;\n            try {\n              const parsed = JSON.parse(data);\n              if (parsed.content) {\n                fullMessage += parsed.content;\n                setStreamingMessage(fullMessage);\n              }\n            } catch (e) {}\n          }\n        }\n      }\n\n      if (fullMessage.trim()) {\n        setMessages(prev => [...prev, { \n          role: 'assistant', \n          content: fullMessage, \n          timestamp: new Date()\n        }]);\n      }\n      setStreamingMessage('');\n      loadChatSessions();\n\n    } catch (error) {\n      if (error.name === 'AbortError') {\n        console.log('Generation stopped by user');\n      } else {\n        console.error('Chat error:', error);\n        setMessages(prev => [...prev, { \n          role: 'assistant', \n          content: 'âš ï¸ Error connecting to AI. Please try again.', \n          timestamp: new Date(),\n          isError: true\n        }]);\n      }\n    } finally {\n      setIsLoading(false);\n      abortControllerRef.current = null;\n    }\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      if (isAuthenticated) {\n        handleSendMessage();\n      } else {\n        handleAuth();\n      }\n    }\n  };\n\n  const exportChat = () => {\n    const content = messages.map(m => \n      `[${new Date(m.timestamp).toLocaleString()}] ${m.role}: ${m.content}`\n    ).join('\\n\\n');\n    \n    const blob = new Blob([content], { type: 'text/plain' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `nexaflow-ai-${new Date().toISOString()}.txt`;\n    a.click();\n  };\n\n  const clearCurrentChat = async () => {\n    if (!currentSessionId) return;\n    if (!window.confirm('Clear all messages?')) return;\n\n    try {\n      await fetch(`${API_URL}/chat/clear`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('token')}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ sessionId: currentSessionId })\n      });\n      setMessages([]);\n      loadChatSessions();\n    } catch (error) {\n      console.error('Clear error:', error);\n    }\n  };\n\n  // FIXED: Accurate date calculation\n  const formatDate = (dateString) => {\n    const chatDate = new Date(dateString);\n    const today = new Date();\n    \n    // Normalize to midnight for accurate comparison\n    const chatDay = new Date(chatDate.getFullYear(), chatDate.getMonth(), chatDate.getDate());\n    const todayDay = new Date(today.getFullYear(), today.getMonth(), today.getDate());\n    \n    // Calculate difference in milliseconds\n    const diffMs = todayDay - chatDay;\n    const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\n    \n    if (diffDays === 0) return 'Today';\n    if (diffDays === 1) return 'Yesterday';\n    if (diffDays <= 7) return `${diffDays} days ago`;\n    if (diffDays <= 30) return `${Math.floor(diffDays / 7)} weeks ago`;\n    \n    // For older dates, show formatted date\n    const options = { month: 'short', day: 'numeric' };\n    if (chatDate.getFullYear() !== today.getFullYear()) {\n      options.year = 'numeric';\n    }\n    return chatDate.toLocaleDateString('en-US', options);\n  };\n\n  if (!isAuthenticated) {\n    return (\n      <div className={`min-h-screen ${darkMode ? 'bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900' : 'bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50'} flex items-center justify-center p-4 relative overflow-hidden transition-colors duration-500`}>\n        <div className=\"absolute inset-0\">\n          <div className={`absolute top-20 left-20 w-72 h-72 ${darkMode ? 'bg-purple-500' : 'bg-purple-300'} rounded-full mix-blend-multiply filter blur-xl ${darkMode ? 'opacity-20' : 'opacity-30'} animate-blob`}></div>\n          <div className={`absolute top-40 right-20 w-72 h-72 ${darkMode ? 'bg-blue-500' : 'bg-blue-300'} rounded-full mix-blend-multiply filter blur-xl ${darkMode ? 'opacity-20' : 'opacity-30'} animate-blob animation-delay-2000`}></div>\n          <div className={`absolute bottom-20 left-1/2 w-72 h-72 ${darkMode ? 'bg-pink-500' : 'bg-pink-300'} rounded-full mix-blend-multiply filter blur-xl ${darkMode ? 'opacity-20' : 'opacity-30'} animate-blob animation-delay-4000`}></div>\n        </div>\n\n        <button\n          onClick={() => setDarkMode(!darkMode)}\n          className={`absolute top-6 right-6 p-3 rounded-full ${darkMode ? 'bg-white/10 hover:bg-white/20' : 'bg-purple-100 hover:bg-purple-200'} backdrop-blur-sm transition-all duration-300 shadow-lg z-50`}\n        >\n          {darkMode ? (\n            <Sun className=\"w-6 h-6 text-yellow-300\" />\n          ) : (\n            <Moon className=\"w-6 h-6 text-purple-700\" />\n          )}\n        </button>\n\n        <div className=\"relative w-full max-w-6xl\">\n          <div className=\"grid md:grid-cols-2 gap-12 items-center\">\n            <div className={`${darkMode ? 'text-white' : 'text-gray-900'} space-y-6`}>\n              <div className=\"mb-8\">\n                <svg viewBox=\"0 0 400 400\" className=\"w-64 h-64 mx-auto\">\n                  <defs>\n                    <linearGradient id=\"grad1\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n                      <stop offset=\"0%\" style={{stopColor: '#8b5cf6', stopOpacity: 1}} />\n                      <stop offset=\"100%\" style={{stopColor: '#3b82f6', stopOpacity: 1}} />\n                    </linearGradient>\n                  </defs>\n                  <circle cx=\"200\" cy=\"200\" r=\"180\" fill=\"url(#grad1)\" opacity=\"0.2\"/>\n                  <circle cx=\"200\" cy=\"200\" r=\"140\" fill=\"url(#grad1)\" opacity=\"0.3\"/>\n                  <circle cx=\"200\" cy=\"200\" r=\"100\" fill=\"url(#grad1)\" opacity=\"0.4\"/>\n                  \n                  <g className=\"animate-pulse\">\n                    <path d=\"M200 120 L240 160 L200 200 L160 160 Z\" fill=\"#8b5cf6\"/>\n                    <path d=\"M200 200 L240 240 L200 280 L160 240 Z\" fill=\"#3b82f6\"/>\n                    <circle cx=\"200\" cy=\"160\" r=\"8\" fill=\"white\"/>\n                    <circle cx=\"240\" cy=\"200\" r=\"8\" fill=\"white\"/>\n                    <circle cx=\"200\" cy=\"240\" r=\"8\" fill=\"white\"/>\n                    <circle cx=\"160\" cy=\"200\" r=\"8\" fill=\"white\"/>\n                  </g>\n                  \n                  <text x=\"200\" y=\"340\" textAnchor=\"middle\" fill={darkMode ? 'white' : '#1f2937'} fontSize=\"32\" fontWeight=\"bold\">Smart Talk</text>\n                  <text x=\"200\" y=\"365\" textAnchor=\"middle\" fill={darkMode ? '#a78bfa' : '#8b5cf6'} fontSize=\"14\">AI Intelligence Platform</text>\n                </svg>\n              </div>\n\n              <div className=\"text-center md:text-left space-y-4\">\n                <div className=\"space-y-2\">\n                  <h1 className=\"text-5xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent\">\n                    Smart Talk AI\n                  </h1>\n                  <p className={`text-xl ${darkMode ? 'text-purple-300' : 'text-purple-600'} font-semibold`}>\n                    Next-Generation Intelligence\n                  </p>\n                </div>\n\n                <div className={`space-y-3 ${darkMode ? 'text-gray-300' : 'text-gray-700'} text-lg leading-relaxed`}>\n                  <p className=\"flex items-start gap-3\">\n                    <Brain className=\"w-6 h-6 text-purple-500 flex-shrink-0 mt-1\" />\n                    <span>Experience cutting-edge AI with multi-provider fallback system ensuring 99.9% uptime and intelligent responses.</span>\n                  </p>\n                  <p className=\"flex items-start gap-3\">\n                    <Cpu className=\"w-6 h-6 text-blue-500 flex-shrink-0 mt-1\" />\n                    <span>Powered by Gemini, OpenAI, and Cohere - seamlessly switching to ensure you always get the best response.</span>\n                  </p>\n                  <p className=\"flex items-start gap-3\">\n                    <ChevronRight className=\"w-6 h-6 text-yellow-500 flex-shrink-0 mt-1\" />\n                    <span>Lightning-fast streaming responses, smart context retention, and unlimited conversations - completely free.</span>\n                  </p>\n                </div>\n\n                <div className=\"pt-6 flex flex-wrap gap-3 justify-center md:justify-start\">\n                  <span className={`px-4 py-2 rounded-full text-sm font-semibold ${darkMode ? 'bg-green-500/20 text-green-300 border border-green-500/30' : 'bg-green-100 text-green-700 border border-green-300'}`}>\n                    âœ“ Multi-AI Powered\n                  </span>\n                  <span className={`px-4 py-2 rounded-full text-sm font-semibold ${darkMode ? 'bg-blue-500/20 text-blue-300 border border-blue-500/30' : 'bg-blue-100 text-blue-700 border border-blue-300'}`}>\n                    âœ“ 99.9% Uptime\n                  </span>\n                  <span className={`px-4 py-2 rounded-full text-sm font-semibold ${darkMode ? 'bg-purple-500/20 text-purple-300 border border-purple-500/30' : 'bg-purple-100 text-purple-700 border border-purple-300'}`}>\n                    âœ“ Enterprise Grade\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            <div className={`${darkMode ? 'bg-white/10 border-white/20' : 'bg-white border-gray-200'} backdrop-blur-xl rounded-2xl p-8 shadow-2xl border`}>\n              <div className=\"flex gap-2 mb-6\">\n                <button\n                  onClick={() => setAuthMode('signin')}\n                  className={`flex-1 py-3 rounded-xl font-medium transition-all ${\n                    authMode === 'signin'\n                      ? darkMode \n                        ? 'bg-white text-purple-600 shadow-lg'\n                        : 'bg-purple-600 text-white shadow-lg'\n                      : darkMode\n                        ? 'text-white hover:bg-white/10'\n                        : 'text-gray-700 hover:bg-gray-100'\n                  }`}\n                >\n                  Sign In\n                </button>\n                <button\n                  onClick={() => setAuthMode('signup')}\n                  className={`flex-1 py-3 rounded-xl font-medium transition-all ${\n                    authMode === 'signup'\n                      ? darkMode \n                        ? 'bg-white text-purple-600 shadow-lg'\n                        : 'bg-purple-600 text-white shadow-lg'\n                      : darkMode\n                        ? 'text-white hover:bg-white/10'\n                        : 'text-gray-700 hover:bg-gray-100'\n                  }`}\n                >\n                  Sign Up for Free\n                </button>\n              </div>\n\n              <div className=\"space-y-4\">\n                {authMode === 'signup' && (\n                  <>\n                    <div className=\"relative\">\n                      <User className={`absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 ${darkMode ? 'text-gray-400' : 'text-gray-500'}`} />\n                      <input\n                        type=\"text\"\n                        placeholder=\"Full Name *\"\n                        value={authData.name}\n                        onChange={(e) => setAuthData({...authData, name: e.target.value})}\n                        onKeyPress={handleKeyPress}\n                        className={`w-full pl-12 pr-4 py-3 rounded-xl ${darkMode ? 'bg-white/10 border-white/20 text-white placeholder-gray-400' : 'bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-500'} border focus:outline-none focus:border-purple-400 transition-all`}\n                      />\n                    </div>\n\n                    <div className=\"relative\">\n                      <Phone className={`absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 ${darkMode ? 'text-gray-400' : 'text-gray-500'}`} />\n                      <input\n                        type=\"tel\"\n                        placeholder=\"Phone Number *\"\n                        value={authData.phone}\n                        onChange={(e) => setAuthData({...authData, phone: e.target.value})}\n                        onKeyPress={handleKeyPress}\n                        className={`w-full pl-12 pr-4 py-3 rounded-xl ${darkMode ? 'bg-white/10 border-white/20 text-white placeholder-gray-400' : 'bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-500'} border focus:outline-none focus:border-purple-400 transition-all`}\n                      />\n                    </div>\n\n                    <div className=\"relative\">\n                      <Globe className={`absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 ${darkMode ? 'text-gray-400' : 'text-gray-500'}`} />\n                      <input\n                        type=\"text\"\n                        placeholder=\"Country *\"\n                        value={authData.country}\n                        onChange={(e) => setAuthData({...authData, country: e.target.value})}\n                        onKeyPress={handleKeyPress}\n                        className={`w-full pl-12 pr-4 py-3 rounded-xl ${darkMode ? 'bg-white/10 border-white/20 text-white placeholder-gray-400' : 'bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-500'} border focus:outline-none focus:border-purple-400 transition-all`}\n                      />\n                    </div>\n                  </>\n                )}\n\n                <div className=\"relative\">\n                  <Mail className={`absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 ${darkMode ? 'text-gray-400' : 'text-gray-500'}`} />\n                  <input\n                    type=\"email\"\n                    placeholder=\"Email *\"\n                    value={authData.email}\n                    onChange={(e) => setAuthData({...authData, email: e.target.value})}\n                    onKeyPress={handleKeyPress}\n                    className={`w-full pl-12 pr-4 py-3 rounded-xl ${darkMode ? 'bg-white/10 border-white/20 text-white placeholder-gray-400' : 'bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-500'} border focus:outline-none focus:border-purple-400 transition-all`}\n                  />\n                </div>\n\n                <div className=\"relative\">\n                  <Lock className={`absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 ${darkMode ? 'text-gray-400' : 'text-gray-500'}`} />\n                  <input\n                    type=\"password\"\n                    placeholder=\"Password *\"\n                    value={authData.password}\n                    onChange={(e) => setAuthData({...authData, password: e.target.value})}\n                    onKeyPress={handleKeyPress}\n                    className={`w-full pl-12 pr-4 py-3 rounded-xl ${darkMode ? 'bg-white/10 border-white/20 text-white placeholder-gray-400' : 'bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-500'} border focus:outline-none focus:border-purple-400 transition-all`}\n                  />\n                </div>\n\n                {authMode === 'signup' && (\n                  <div className={`flex items-start gap-2 p-3 rounded-lg ${darkMode ? 'bg-blue-500/10 border-blue-500/30' : 'bg-blue-50 border-blue-200'} border text-sm`}>\n                    <CheckCircle className=\"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5\" />\n                    <p className={darkMode ? 'text-blue-200' : 'text-blue-800'}>\n                      We'll send a verification email to confirm your account.\n                    </p>\n                  </div>\n                )}\n\n                <button\n                  onClick={handleAuth}\n                  className=\"w-full py-3 rounded-xl bg-gradient-to-r from-purple-500 to-blue-500 text-white font-semibold hover:shadow-xl transition-all hover:scale-[1.02]\"\n                >\n                  {authMode === 'signin' ? 'Sign In' : 'Create Account'}\n                </button>\n              </div>\n\n              <p className={`text-center text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mt-6`}>\n                {authMode === 'signin' ? \"New here? \" : \"Already have an account? \"}\n                <button\n                  onClick={() => setAuthMode(authMode === 'signin' ? 'signup' : 'signin')}\n                  className={`${darkMode ? 'text-purple-300 hover:text-white' : 'text-purple-600 hover:text-purple-700'} font-semibold`}\n                >\n                  {authMode === 'signin' ? 'Sign Up' : 'Sign In'}\n                </button>\n              </p>\n\n              <div className={`mt-8 pt-6 border-t ${darkMode ? 'border-white/10' : 'border-gray-200'}`}>\n                <p className={`text-center text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                  Â© 2025 Smart Talk AI. All rights reserved.\n                </p>\n                <p className={`text-center text-xs ${darkMode ? 'text-gray-500' : 'text-gray-500'} mt-1`}>\n                  Developed with â¤ï¸ by <span className=\"font-semibold text-purple-400\">Nutan Phadtare</span>\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <style>{`\n          @keyframes blob {\n            0%, 100% { transform: translate(0, 0) scale(1); }\n            25% { transform: translate(20px, -50px) scale(1.1); }\n            50% { transform: translate(-20px, 20px) scale(0.9); }\n            75% { transform: translate(50px, 50px) scale(1.05); }\n          }\n          .animate-blob { animation: blob 7s infinite; }\n          .animation-delay-2000 { animation-delay: 2s; }\n          .animation-delay-4000 { animation-delay: 4s; }\n        `}</style>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`flex h-screen ${darkMode ? 'bg-gray-900' : 'bg-gray-50'}`}>\n      <div className={`${sidebarOpen ? 'w-72' : 'w-0'} transition-all duration-300 ${darkMode ? 'bg-gray-950 border-gray-800' : 'bg-white border-gray-200'} border-r flex flex-col overflow-hidden`}>\n        <div className={`p-4 border-b ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n          <button\n            onClick={createNewChat}\n            className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg ${darkMode ? 'bg-gray-800 hover:bg-gray-700 text-white' : 'bg-purple-100 hover:bg-purple-200 text-purple-900'} font-medium transition-colors`}\n          >\n            <Plus className=\"w-5 h-5\" />\n            New Chat\n          </button>\n        </div>\n\n        <div className=\"flex-1 overflow-y-auto p-3 space-y-2\">\n          <div className={`px-3 py-2 text-xs font-semibold ${darkMode ? 'text-gray-400' : 'text-gray-600'} uppercase tracking-wide`}>\n            Chat History\n          </div>\n          {chatSessions.map((session) => (\n            <div\n              key={session.sessionId}\n              onClick={() => loadSessionMessages(session.sessionId)}\n              className={`group flex items-start gap-3 px-3 py-2 rounded-lg cursor-pointer transition-colors ${\n                session.sessionId === currentSessionId\n                  ? darkMode ? 'bg-gray-800 text-white' : 'bg-purple-50 text-purple-900'\n                  : darkMode ? 'hover:bg-gray-800/50 text-gray-300' : 'hover:bg-gray-50 text-gray-700'\n              }`}\n            >\n              <MessageSquare className=\"w-4 h-4 mt-1 flex-shrink-0 text-purple-500\" />\n              <div className=\"flex-1 min-w-0\">\n                {editingSessionId === session.sessionId ? (\n                  <div className=\"flex gap-1\">\n                    <input\n                      type=\"text\"\n                      value={editTitle}\n                      onChange={(e) => setEditTitle(e.target.value)}\n                      className={`flex-1 px-2 py-1 text-xs rounded ${darkMode ? 'bg-gray-900 text-white border-gray-700' : 'bg-white text-gray-900 border-gray-300'} border`}\n                      autoFocus\n                    />\n                    <button onClick={() => updateSessionTitle(session.sessionId, editTitle)}>\n                      <Check className=\"w-4 h-4 text-green-500\" />\n                    </button>\n                    <button onClick={() => setEditingSessionId(null)}>\n                      <X className=\"w-4 h-4 text-red-500\" />\n                    </button>\n                  </div>\n                ) : (\n                  <>\n                    <p className={`text-sm truncate ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                      {session.title}\n                    </p>\n                    <p className={`text-xs ${darkMode ? 'text-gray-500' : 'text-gray-600'}`}>\n                      {formatDate(session.updatedAt)}\n                    </p>\n                  </>\n                )}\n              </div>\n              <div className=\"hidden group-hover:flex gap-1\">\n                <button\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    setEditingSessionId(session.sessionId);\n                    setEditTitle(session.title);\n                  }}\n                  className={`p-1 rounded ${darkMode ? 'hover:bg-gray-700' : 'hover:bg-gray-200'}`}\n                >\n                  <Edit2 className=\"w-3 h-3\" />\n                </button>\n                <button\n                  onClick={(e) => deleteSession(session.sessionId, e)}\n                  className={`p-1 rounded ${darkMode ? 'hover:bg-gray-700' : 'hover:bg-gray-200'}`}\n                >\n                  <Trash2 className=\"w-3 h-3 text-red-400\" />\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        <div className={`p-4 border-t ${darkMode ? 'border-gray-800' : 'border-gray-200'} space-y-2`}>\n          <button\n            onClick={() => setShowSettings(!showSettings)}\n            className={`w-full flex items-center gap-3 px-4 py-2 rounded-lg ${darkMode ? 'hover:bg-gray-800 text-gray-300' : 'hover:bg-gray-100 text-gray-700'} transition-colors`}\n          >\n            <Settings className=\"w-5 h-5\" />\n            <span className=\"font-medium\">Settings</span>\n          </button>\n\n          {showSettings && (\n            <div className={`p-4 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-gray-100'} space-y-3`}>\n              <button\n                onClick={() => setDarkMode(!darkMode)}\n                className={`w-full flex items-center justify-center gap-3 px-3 py-2 rounded-lg ${darkMode ? 'bg-gray-900 text-white' : 'bg-white text-gray-900'} border ${darkMode ? 'border-gray-700' : 'border-gray-300'} hover:scale-105 transition-transform`}\n              >\n                {darkMode ? (\n                  <>\n                    <Sun className=\"w-4 h-4 text-yellow-400\" />\n                    <span className=\"text-sm font-medium\">Light Mode</span>\n                  </>\n                ) : (\n                  <>\n                    <Moon className=\"w-4 h-4 text-purple-600\" />\n                    <span className=\"text-sm font-medium\">Dark Mode</span>\n                  </>\n                )}\n              </button>\n\n              <div className={`p-3 rounded-lg ${darkMode ? 'bg-gray-900/50 border-gray-700' : 'bg-white border-gray-300'} border`}>\n                <p className={`text-xs font-semibold mb-2 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>AI Providers</p>\n                <div className=\"space-y-1\">\n                  <div className=\"flex items-center justify-between text-xs\">\n                    <span className={darkMode ? 'text-gray-300' : 'text-gray-700'}>Gemini</span>\n                    <span className=\"text-green-500\">â—</span>\n                  </div>\n                  <div className=\"flex items-center justify-between text-xs\">\n                    <span className={darkMode ? 'text-gray-300' : 'text-gray-700'}>OpenAI</span>\n                    <span className=\"text-green-500\">â—</span>\n                  </div>\n                  <div className=\"flex items-center justify-between text-xs\">\n                    <span className={darkMode ? 'text-gray-300' : 'text-gray-700'}>Cohere</span>\n                    <span className=\"text-green-500\">â—</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          <button\n            onClick={clearCurrentChat}\n            className={`w-full flex items-center gap-3 px-4 py-2 rounded-lg ${darkMode ? 'hover:bg-gray-800 text-gray-300' : 'hover:bg-gray-100 text-gray-700'} transition-colors`}\n          >\n            <Trash2 className=\"w-5 h-5\" />\n            <span className=\"font-medium\">Clear Chat</span>\n          </button>\n\n          <button\n            onClick={exportChat}\n            className={`w-full flex items-center gap-3 px-4 py-2 rounded-lg ${darkMode ? 'hover:bg-gray-800 text-gray-300' : 'hover:bg-gray-100 text-gray-700'} transition-colors`}\n          >\n            <Download className=\"w-5 h-5\" />\n            <span className=\"font-medium\">Export Chat</span>\n          </button>\n\n          <div className={`flex items-center gap-3 px-4 py-3 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-gray-100'}`}>\n            <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center font-bold text-white\">\n              {user?.name?.charAt(0).toUpperCase()}\n            </div>\n            <div className=\"flex-1 min-w-0\">\n              <p className={`text-sm font-medium truncate ${darkMode ? 'text-white' : 'text-gray-900'}`}>{user?.name}</p>\n              <p className={`text-xs truncate ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>{user?.email}</p>\n            </div>\n            <button\n              onClick={() => {\n                localStorage.clear();\n                window.location.reload();\n              }}\n              className={`p-2 rounded-lg ${darkMode ? 'hover:bg-gray-700' : 'hover:bg-gray-200'} transition-colors`}\n              title=\"Logout\"\n            >\n              <LogOut className=\"w-4 h-4\" />\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex-1 flex flex-col\">\n        <div className={`${darkMode ? 'bg-gray-900 border-gray-800' : 'bg-white border-gray-200'} border-b px-6 py-4 flex items-center justify-between`}>\n          <div className=\"flex items-center gap-4\">\n            <button\n              onClick={() => setSidebarOpen(!sidebarOpen)}\n              className={`p-2 rounded-lg ${darkMode ? 'hover:bg-gray-800 text-gray-300' : 'hover:bg-gray-100 text-gray-700'} transition-colors`}\n            >\n              <Menu className=\"w-5 h-5\" />\n            </button>\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center shadow-lg\">\n                <Sparkles className=\"w-5 h-5 text-white\" />\n              </div>\n              <div>\n                <h1 className={`text-lg font-bold ${darkMode ? 'text-white' : 'text-gray-900'}`}>Smart Talk AI</h1>\n                <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Multi-Provider Intelligence</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"flex-1 overflow-y-auto\">\n          {messages.length === 0 ? (\n            <div className=\"h-full flex flex-col items-center justify-center p-8\">\n              <div className=\"max-w-3xl w-full\">\n                <div className=\"text-center mb-12\">\n                  <div className=\"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-purple-500 to-blue-500 rounded-2xl mb-6 shadow-2xl\">\n                    <Sparkles className=\"w-10 h-10 text-white\" />\n                  </div>\n                  <h2 className={`text-4xl font-bold mb-3 ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                    How can I help you today?\n                  </h2>\n                  <p className={`text-lg ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                    Powered by multiple AI providers for maximum reliability\n                  </p>\n                </div>\n\n                <div className=\"grid md:grid-cols-2 gap-4\">\n                  {suggestedPrompts.map((prompt, i) => (\n                    <button\n                      key={i}\n                      onClick={() => setInput(prompt.text)}\n                      className={`group p-5 rounded-xl text-left transition-all hover:scale-105 ${\n                        darkMode ? 'bg-gray-800 hover:bg-gray-750 border-gray-700' : 'bg-white hover:bg-gray-50 border-gray-200'\n                      } border shadow-lg hover:shadow-xl`}\n                    >\n                      <div className=\"flex items-start gap-3\">\n                        <span className=\"text-3xl\">{prompt.icon}</span>\n                        <div className=\"flex-1\">\n                          <p className={`text-xs font-bold mb-1 uppercase tracking-wide ${darkMode ? 'text-purple-400' : 'text-purple-600'}`}>\n                            {prompt.category}\n                          </p>\n                          <p className={`text-sm font-medium ${darkMode ? 'text-gray-200' : 'text-gray-800'}`}>\n                            {prompt.text}\n                          </p>\n                        </div>\n                        <ChevronRight className={`w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity ${darkMode ? 'text-gray-400' : 'text-gray-500'}`} />\n                      </div>\n                    </button>\n                  ))}\n                </div>\n              </div>\n            </div>\n          ) : (\n            <div className=\"max-w-3xl mx-auto w-full p-6 space-y-6\">\n              {messages.map((msg, i) => (\n                <div key={i} className=\"flex gap-4 animate-fadeIn\">\n                  {msg.role === 'assistant' ? (\n                    <div className=\"w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center flex-shrink-0 shadow-lg\">\n                      <Sparkles className=\"w-5 h-5 text-white\" />\n                    </div>\n                  ) : (\n                    <div className=\"w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-500 flex items-center justify-center flex-shrink-0 font-bold text-white shadow-lg\">\n                      {user?.name?.charAt(0).toUpperCase()}\n                    </div>\n                  )}\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <span className={`text-sm font-bold ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                        {msg.role === 'user' ? user?.name : 'NexaFlow AI'}\n                      </span>\n                      {msg.provider && (\n                        <span className={`text-xs px-2 py-0.5 rounded-full ${darkMode ? 'bg-purple-900/50 text-purple-300' : 'bg-purple-100 text-purple-700'}`}>\n                          {msg.provider}\n                        </span>\n                      )}\n                    </div>\n                    <p className={`whitespace-pre-wrap leading-relaxed ${msg.isError ? 'text-red-500' : darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                      {msg.content}\n                    </p>\n                  </div>\n                </div>\n              ))}\n\n              {streamingMessage && (\n                <div className=\"flex gap-4 animate-fadeIn\">\n                  <div className=\"w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center flex-shrink-0 shadow-lg\">\n                    <Sparkles className=\"w-5 h-5 text-white animate-pulse\" />\n                  </div>\n                  <div className=\"flex-1\">\n                    <span className={`text-sm font-bold block mb-2 ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                      Smart Talk AI\n                    </span>\n                    <p className={`whitespace-pre-wrap leading-relaxed ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                      {streamingMessage}\n                      <span className=\"inline-block w-2 h-4 bg-purple-500 ml-1 animate-pulse\"></span>\n                    </p>\n                  </div>\n                </div>\n              )}\n\n              <div ref={messagesEndRef} />\n            </div>\n          )}\n        </div>\n\n        <div className={`${darkMode ? 'bg-gray-900 border-gray-800' : 'bg-white border-gray-200'} border-t p-4`}>\n          <div className=\"max-w-3xl mx-auto\">\n            <div className={`flex gap-4 p-4 rounded-2xl ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border shadow-lg`}>\n              <textarea\n                value={input}\n                onChange={(e) => setInput(e.target.value)}\n                onKeyPress={handleKeyPress}\n                placeholder=\"Ask Smart Talk AI anything...\"\n                disabled={isLoading}\n                rows={1}\n                className={`flex-1 bg-transparent border-none focus:outline-none resize-none ${darkMode ? 'text-white placeholder-gray-500' : 'text-gray-900 placeholder-gray-400'} disabled:opacity-50`}\n                style={{ minHeight: '24px', maxHeight: '200px' }}\n              />\n              {isLoading ? (\n                <button\n                  onClick={stopGeneration}\n                  className=\"w-12 h-12 rounded-xl bg-red-500 hover:bg-red-600 flex items-center justify-center transition-all hover:scale-105 flex-shrink-0\"\n                  title=\"Stop generation\"\n                >\n                  <Square className=\"w-5 h-5 text-white fill-white\" />\n                </button>\n              ) : (\n                <button\n                  onClick={handleSendMessage}\n                  disabled={!input.trim()}\n                  className=\"w-12 h-12 rounded-xl bg-gradient-to-r from-purple-500 to-blue-500 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-xl transition-all hover:scale-105 flex-shrink-0\"\n                >\n                  <Send className=\"w-5 h-5 text-white\" />\n                </button>\n              )}\n            </div>\n            <p className={`text-xs text-center mt-3 ${darkMode ? 'text-gray-500' : 'text-gray-600'}`}>\n              Smart Talk AI uses multiple providers for best results. Always verify important information.\n            </p>\n          </div>\n        </div>\n      </div>\n\n      <style>{`\n        @keyframes fadeIn {\n          from { opacity: 0; transform: translateY(10px); }\n          to { opacity: 1; transform: translateY(0); }\n        }\n        .animate-fadeIn {\n          animation: fadeIn 0.3s ease-out;\n        }\n      `}</style>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}